(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[16],{500:function(e,a,t){"use strict";var r=t(12),n=t(13),s=t(15),o=t(14),l=t(0),i=t.n(l),c=function(e){Object(s.a)(t,e);var a=Object(o.a)(t);function t(){return Object(r.a)(this,t),a.apply(this,arguments)}return Object(n.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"vx-checkbox-con ".concat(this.props.className?this.props.className:""," vx-checkbox-").concat(this.props.color)},i.a.createElement("input",{type:"checkbox",defaultChecked:this.props.defaultChecked,checked:this.props.checked,value:this.props.value,disabled:this.props.disabled,onClick:this.props.onClick?this.props.onClick:null,onChange:this.props.onChange?this.props.onChange:null}),i.a.createElement("span",{className:"vx-checkbox vx-checkbox-".concat(this.props.size?this.props.size:"md")},i.a.createElement("span",{className:"vx-checkbox--check"},this.props.icon)),i.a.createElement("span",null,this.props.label))}}]),t}(i.a.Component);a.a=c},502:function(e,a,t){},535:function(e,a,t){"use strict";t.d(a,"e",(function(){return u})),t.d(a,"d",(function(){return p})),t.d(a,"f",(function(){return d})),t.d(a,"c",(function(){return m})),t.d(a,"g",(function(){return h})),t.d(a,"a",(function(){return f})),t.d(a,"b",(function(){return g}));var r=t(38),n=t.n(r),s=t(65),o=t(66),l=t(30),i=t(20),c=t(11),u=(t(55),function(e,a){return function(){var t=Object(s.a)(n.a.mark((function t(r){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null,t.next=3,o.a.post("users/all",{userId:a}).then((function(a){var t=a,n=e.page,s=e.perPage,o=Math.ceil(t.data.length/s),l=[],i={};if(void 0!==n&&void 0!==s){var c=(n-1)*s,u=n*s;c>t.data.length?(o=Math.ceil(t.data.length/s),l=t.data.slice(0,s),i.page=0,i.perPage=s):(l=t.data.slice(c,u),i=e)}else o=Math.ceil(t.data.length/s),l=t.data.slice(0,s),i=e;0===l.length&&(i.page=0,i.perPage=s,l=t.data.slice(0,s)),r({type:"USER_ALL_DATA",data:t.data}),r({type:"SESSIONS_DATA",data:l,totalPages:o,newparams:i})}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),p=function(e){return function(a){return a({type:"FILTER_SESSIONS_DATA",value:e})}},d=function(e){return function(){var a=Object(s.a)(n.a.mark((function a(t){return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,o.a.post("users/profile",e).then((function(e){e.data.status?t({type:"GET_PROFILE",data:e.data.data,note:e.data.note}):l.b.error(e.data.msg)}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},m=function(e){return function(){var a=Object(s.a)(n.a.mark((function a(t){return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return null,a.next=3,o.a.post("users/delete",e).then((function(e){e.data.status||l.b.error("Internal Server")}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},h=function(e,a){return function(){var t=Object(s.a)(n.a.mark((function t(r,s){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("users/update",e).then((function(e){e.data.status?(l.b.success("Success!"),a&&(localStorage.removeItem([c.a.token]),localStorage.removeItem([c.a.expire]),i.a.push("/login"))):l.b.error("Internal Server Error!")}));case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},f=function(e){return function(){var a=Object(s.a)(n.a.mark((function a(t,r){return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return null,a.next=3,o.a.post("users/add",e).then((function(e){e.data.status||l.b.error(e.data.msg)}));case 3:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},g=function(e){return function(){var a=Object(s.a)(n.a.mark((function a(t,r){var s;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s=null,a.next=3,o.a.post("users/stream-key-logger",e).then((function(e){s=e.data}));case 3:s.status||l.b.error("Log Error");case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}},536:function(e,a,t){},537:function(e,a,t){},717:function(e,a,t){"use strict";t.r(a);var r=t(12),n=t(13),s=t(15),o=t(14),l=t(0),i=t.n(l),c=t(508),u=t(509),p=t(38),d=t.n(p),m=t(65),h=t(134),f=t(261),g=t(491),b=t(496),v=t(492),w=t(490),E=t(506),x=t.n(E),P=t(2),y=t.n(P),S=t(561),k=t.n(S),C=t(20),N=t(169),A=t(181),D=t(176),O=t(166),j=t(167),R=t(144),F=t(165),L=t(21),I=t(535),V=t(512),_=t(520),U=t(513),z=t(137),T=t(53),B=t.n(T),H=(t(507),t(502),t(518)),M=t(30),J=t(11),q=[{value:J.a.role.admin,label:J.a.role.admin},{value:"EdDN",label:"EdDN"}],G=[{value:"Activado",label:"Activado"},{value:"desactivado",label:"desactivado"}],W=function(e){Object(s.a)(t,e);var a=Object(o.a)(t);function t(){var e;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=a.call.apply(a,[this].concat(s))).state={_id:"",username:"",email:"",password:"",role:"EdDN",status:"activado",new_password:"",old_password:""},e.handleSubmit=function(){var a=Object(m.a)(d.a.mark((function a(t){var r;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log("State: ",t),t.username&&t.email){a.next=4;break}return M.b.error("Ingrese los cambios correctamente."),a.abrupt("return");case 4:if(e.props.userinfo.role===J.a.role.stuff&&(t.role=J.a.role.client,t.manager=e.props.userinfo.id),e.props.addNew){a.next=10;break}return a.next=8,e.props.updateData(t);case 8:a.next=13;break;case 10:return delete t._id,a.next=13,e.props.addData(t);case 13:r={page:1,perPage:10},e.props.handleSidebar(!1,!0),e.props.userinfo.role===J.a.role.stuff?e.props.getUsers(r,e.props.userinfo.id):e.props.getUsers(r);case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return Object(n.a)(t,[{key:"componentDidUpdate",value:function(e,a){this.props.addNew&&e!==this.props?this.setState({_id:"",username:"",email:"",password:"",role:J.a.role.stuff,status:"active"}):this.props.data&&e!==this.props&&this.setState({_id:this.props.data._id,username:this.props.data.username,email:this.props.data.email,password:this.props.data.password,role:this.props.data.role,status:this.props.data.status})}},{key:"render",value:function(){var e=this,a=this.props,t=a.show,r=a.handleSidebar,n=a.data,s=this.state.username;return i.a.createElement("div",{className:y()("data-list-sidebar",{show:t})},i.a.createElement("div",{className:"data-list-sidebar-header mt-2 px-2 d-flex justify-content-between"},i.a.createElement("h4",null,null!==n?"Actualizar usuario":"Agregar Usuario"),i.a.createElement(z.a,{size:20,onClick:function(){return r(!1,!0)}})),i.a.createElement(B.a,{className:"px-2 mt-1",options:{wheelPropagation:!1}},i.a.createElement(V.a,null,i.a.createElement(_.a,{for:"username"},"Nombre del usuario"),i.a.createElement(U.a,{type:"text",id:"username",value:s,disabled:!!this.props.onlyView,onChange:function(a){return e.setState({username:a.target.value})}})),i.a.createElement(V.a,null,i.a.createElement(_.a,{for:"email"},"Correo Electr\xf3nico"),i.a.createElement(U.a,{type:"email",id:"email",value:this.state.email,disabled:!!this.props.onlyView,onChange:function(a){return e.setState({email:a.target.value})}})),i.a.createElement(V.a,null,i.a.createElement(_.a,{for:"password"},"Contrase\xf1a"),i.a.createElement(U.a,{type:"password",id:"password",value:this.state.password,disabled:!!this.props.onlyView,onChange:function(a){return e.setState({password:a.target.value})}})),this.props.userinfo.role===J.a.role.superAdmin?i.a.createElement(V.a,null,i.a.createElement(_.a,{for:"role"},"Rol"),i.a.createElement(H.a,{className:"React mr-3",classNamePrefix:"select",disabled:!!this.props.onlyView,name:"role",value:{value:this.state.role,label:this.state.role},options:q,onChange:function(a){return e.setState({role:a.value})}})):null,i.a.createElement(V.a,null,i.a.createElement(_.a,{for:"data-skintype"},"Estado"),i.a.createElement(H.a,{className:"React mr-3",disabled:!!this.props.onlyView,classNamePrefix:"select",value:{value:this.state.status,label:this.state.status},name:"status",options:G,onChange:function(a){return e.setState({status:a.value})}})),this.props.onlyView?null:i.a.createElement("div",{className:"text-right mt-2"},i.a.createElement(f.a,{color:"primary",className:"mb-1",onClick:function(){return e.handleSubmit(e.state)}},null!==n?"Actualizar":"Agregar"),i.a.createElement(f.a,{className:"ml-1 mb-1",color:"danger",outline:!0,onClick:function(){return r(!1,!0)}},"Cancelar"))))}}]),t}(l.Component),Y=Object(L.b)((function(e){return{userNotes:e.users.user_notes}}),{})(W),K=t(500),Q=t(563),X=t.n(Q),Z=(t(536),t(537),{rows:{selectedHighlighStyle:{backgroundColor:"rgba(115,103,240,.05)",color:"#7367F0 !important",boxShadow:"0 0 1px 0 #7367F0 !important","&:hover":{transform:"translateY(0px) !important"}}}});var $=function(e){return i.a.createElement("div",{className:"data-list-action"},i.a.createElement(N.a,{className:"cursor-pointer mr-1",size:20,onClick:function(){return e.currentData(e.row)}}),i.a.createElement(A.a,{className:"cursor-pointer",size:20,onClick:function(){e.deleteRow(e.row)}}))},ee=function(e){return i.a.createElement("div",{className:"data-list-header justify-content-between flex-wrap d-flex"},i.a.createElement("div",{className:"actions-left d-flex flex-wrap"},i.a.createElement(f.a,{className:"add-new-btn",color:"primary",onClick:function(){return e.handleSidebar(!0,!0)},outline:!0},i.a.createElement(D.a,{size:15}),i.a.createElement("span",{className:"align-middle"},"Agregar Usuario"))),i.a.createElement("div",{className:"actions-right d-flex flex-wrap mt-sm-0 mt-2 float-right"},i.a.createElement(g.a,{className:"data-list-rows-dropdown mr-1 d-md-block d-none"},i.a.createElement(b.a,{color:"",className:"sort-dropdown"},i.a.createElement("span",{className:"align-middle mx-50"},"".concat(e.index[0]||0," - ").concat(e.index[1]||0," of ").concat(e.total)),i.a.createElement(O.a,{size:15})),i.a.createElement(v.a,{tag:"div",right:!0},i.a.createElement(w.a,{tag:"a",onClick:function(){return e.handleRowsPerPage(10)}},"10"),i.a.createElement(w.a,{tag:"a",onClick:function(){return e.handleRowsPerPage(25)}},"25"),i.a.createElement(w.a,{tag:"a",onClick:function(){return e.handleRowsPerPage(50)}},"50"),i.a.createElement(w.a,{tag:"a",onClick:function(){return e.handleRowsPerPage(75)}},"75")))))},ae=function(e){Object(s.a)(t,e);var a=Object(o.a)(t);function t(){var e;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=a.call.apply(a,[this].concat(s))).state={data:[],totalPages:0,currentPage:0,columns:[{name:"Usuario",selector:"username",sortable:!0,minWidth:"200px"},{name:"Correo Electr\xf3nico",selector:"email",sortable:!0},{name:"Rol",selector:"role",sortable:!0},{name:"Estado del Cliente",selector:"status",sortable:!0},{name:"Acciones",sortable:!0,cell:function(a){return i.a.createElement($,{row:a,parsedFilter:e.props.parsedFilter,currentData:e.handleCurrentData,deleteRow:e.handleDelete})}}],allData:[],value:"",rowsPerPage:10,sidebar:!1,currentData:null,selected:[],totalRecords:0,sortIndex:[],addNew:"",defaultAlert:!1,confirmAlert:!1,cancelAlert:!1,onlyView:!1,row:null},e.thumbView=e.props.thumbView,e.handleFilter=function(a){e.setState({value:a.target.value}),e.props.filterData(a.target.value)},e.handleRowsPerPage=function(a){var t=e.props,r=t.parsedFilter,n=t.getUsers,s=t.userinfo,o=void 0!==r.page?r.page:1;C.a.push("?page=".concat(o,"&perPage=").concat(a)),e.setState({rowsPerPage:a}),s.role===J.a.role.superAdmin?n({page:r.page,perPage:75}):s.role===J.a.role.stuff&&n({page:r.page,perPage:75},s.id)},e.handleAlert=function(a,t){e.setState(Object(h.a)({},a,t))},e.handleSidebar=function(a,t){e.setState({sidebar:a,onlyView:!1}),!0===t&&e.setState({currentData:null,addNew:!0})},e.handleDelete=function(a){a.role!=J.a.role.superAdmin?e.setState({defaultAlert:!0,row:a}):M.b.warning("No puede borrar el super admin.")},e.handleAddLog=function(a,t){e.props.addLog({viewer:e.props.userinfo.username,viewer_role:e.props.userinfo.role,target_user:a,target_user_role:t})},e.deleteSession=function(){var a=Object(m.a)(d.a.mark((function a(t){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.props.deleteData(t);case 2:e.props.userinfo.role===J.a.role.superAdmin?e.props.getUsers({page:e.props.parsedFilter.page-1,perPage:e.props.parsedFilter.perPage}):e.props.userinfo.role===J.a.role.stuff&&e.props.getUsers({page:e.props.parsedFilter.page-1,perPage:e.props.parsedFilter.perPage},e.props.userinfo.id);case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleCurrentData=function(){var a=Object(m.a)(d.a.mark((function a(t){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.setState({currentData:t,addNew:!1,onlyView:!1}),e.handleSidebar(!0);case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e.handleRowChange=function(a){e.setState({sidebar:!0,onlyView:!0,currentData:a,addNew:!1})},e.handlePagination=function(a){var t=e.props,r=t.parsedFilter,n=t.getUsers,s=t.userinfo,o=void 0!==r.perPage?r.perPage:10,l=(e.props.thumbView,"");C.a.push("".concat(l,"?page=").concat(a.selected+1,"&perPage=").concat(o)),s.role===J.a.role.superAdmin?n({page:a.selected+1,perPage:o}):s.role===J.a.role.stuff&&n({page:a.selected+1,perPage:o},s.id),e.setState({currentPage:a.selected})},e}return Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,a=e.parsedFilter,t=e.getUsers,r=e.userinfo;r.role===J.a.role.superAdmin?t({page:a.page,perPage:75}):r.role===J.a.role.stuff&&t({page:a.page,perPage:75},r.id)}},{key:"render",value:function(){var e=this,a=this.state,t=a.columns,r=a.data,n=a.customers,s=a.allData,o=a.totalPages,l=a.value,c=a.rowsPerPage,u=a.currentData,p=a.sidebar,d=a.totalRecords,m=a.sortIndex;return i.a.createElement("div",{className:"data-list ".concat(this.props.thumbView?"thumb-view":"list-view")},i.a.createElement(ee,{handleSidebar:this.handleSidebar,handleFilter:this.handleFilter,handleRowsPerPage:this.handleRowsPerPage,rowsPerPage:c,total:d,index:m,customers:n}),i.a.createElement(x.a,{columns:t,data:l.length?s:r,pagination:!0,paginationServer:!0,noDataComponent:i.a.createElement("div",{style:{padding:"24px"}},"Por favor, seleccione un cliente de la barra de b\xfasqueda para mostrar su historial / registros"),paginationComponent:function(){return i.a.createElement(k.a,{previousLabel:i.a.createElement(j.a,{size:15}),nextLabel:i.a.createElement(R.a,{size:15}),breakLabel:"...",breakClassName:"break-me",pageCount:o,containerClassName:"vx-pagination separated-pagination pagination-end pagination-sm mb-0 mt-2",activeClassName:"active",forcePage:e.props.parsedFilter.page?parseInt(e.props.parsedFilter.page-1):0,onPageChange:function(a){return e.handlePagination(a)}})},noHeader:!0,responsive:!0,pointerOnHover:!0,selectableRowsHighlight:!0,onSelectedRowsChange:function(a){return e.setState({selected:a.selectedRows})},onRowClicked:function(a){return e.handleRowChange(a)},customStyles:Z,sortIcon:i.a.createElement(O.a,null),selectableRowsComponent:K.a,selectableRowsComponentProps:{color:"primary",icon:i.a.createElement(F.a,{className:"vx-icon",size:12}),label:"",size:"sm"}}),i.a.createElement(Y,{show:p,data:u,updateData:this.props.updateData,addData:this.props.addData,addLog:this.handleAddLog,handleSidebar:this.handleSidebar,handleStopStreaming:this.props.stopStreaming,thumbView:this.props.thumbView,getUsers:this.props.getUsers,sendNote:this.props.sendNote,userinfo:this.props.userinfo,dataParams:this.props.parsedFilter,addNew:this.state.addNew,bodyarea:this.state.bodyarea||[],onlyView:this.state.onlyView}),i.a.createElement("div",{className:y()("data-list-overlay",{show:p}),onClick:function(){return e.handleSidebar(!1,!0)}}),i.a.createElement(X.a,{title:"Esta seguro?",warning:!0,show:this.state.defaultAlert,showCancel:!0,reverseButtons:!0,cancelBtnBsStyle:"danger",confirmBtnText:"Si, De acuerdo!",cancelBtnText:"Cancelar",onConfirm:function(){e.handleAlert("basicAlert",!1),e.handleAlert("defaultAlert",!1),e.handleAlert("confirmAlert",!0),e.deleteSession(e.state.row)},onCancel:function(){e.handleAlert("basicAlert",!1),e.handleAlert("defaultAlert",!1)}},"De borrar el usuario no se podran desaser los cambios."))}}],[{key:"getDerivedStateFromProps",value:function(e,a){return e.dataList.data&&e.dataList.data.length!==a.data.length||a.currentPage!==e.parsedFilter.page?{data:e.dataList.data,allData:e.dataList.filteredData,totalPages:e.dataList.totalPages,currentPage:parseInt(e.parsedFilter.page)-1,rowsPerPage:parseInt(e.parsedFilter.perPage),totalRecords:e.dataList.totalRecords,sortIndex:e.dataList.sortIndex}:null}}]),t}(l.Component),te=Object(L.b)((function(e){return{dataList:e.users,userinfo:e.auth.userinfo}}),{getUsers:I.e,deleteData:I.c,updateData:I.g,addData:I.a,addLog:I.b,filterData:I.d})(ae),re=t(564),ne=t.n(re),se=function(e){Object(s.a)(t,e);var a=Object(o.a)(t);function t(){return Object(r.a)(this,t),a.apply(this,arguments)}return Object(n.a)(t,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,null,i.a.createElement(u.a,{sm:"12"},i.a.createElement(te,{parsedFilter:ne.a.parse(this.props.location.search)}))))}}]),t}(i.a.Component);a.default=se}}]);
//# sourceMappingURL=16.cca955ef.chunk.js.map